# hub switch router gateway

非常牛的网络笔记
[假装在纽约](http://blog.csdn.net/yu_xiaofei/article/category/1497899)
[](http://www.cnblogs.com/imapla/archive/2013/03/12/2955931.html)

# RJ-45
RJ-45的接头实现了网卡和网线的连接。
它里面有8个铜片可以和网线中的4对双绞（8根）线对应连接。其中100M的网络中<1、2是传送数据的，3、6是接收数据的>。1、2之间是一对<差分信号>，也就是说它们的波形一样，但是相位相差180度，同一时刻的电压幅度互为正负。这样的信号可以传递的更远，抗干扰能力强。同样的，3、6也一样是差分信号。

　　网线中的8根线，<每两根扭在一起成为一对>。我们制作网线的时候，一定要注意要让1、2在其中的一对，3、6在一对。否则长距离情况下使用这根网线的时候会导致无法连接或连接很不稳定。

首先说一下差分方式传输。所谓差分方式传输，就是发送端在两条信号线上传输幅值相等相位相反的电信号，接收端对接受的两条线信号作减法运算，这样获得幅值翻倍的信号。其抗干扰的原理是：假如两条信号线都受到了同样（同相、等幅）的干扰信号，由于接受端对接受的两条线的信号作减法运算，因此干扰信号被 基本抵消，那么怎样才能保证两条信号线受到的干扰信号尽量是同相、等幅的呢？办法之一那就要将两根线扭在一起，按照电磁学的原理分析出：可以近似地认为两条信号线受到的干扰信号是同相、等幅的。 两条线交在一起后，既会抵抗外界的干扰也会防止自己去干扰别人。一般常用的就是双绞线。

# 中继器(Repeater)
中继器：在我们接触到的网络中，最简单的就是两台电脑通过两块网卡构成<双机互连>，两块网卡之间一般是由非屏蔽双绞线来充当信号线的。由于双绞线在传输信号时信号功率会<逐渐衰减>，当信号衰减到一定程度时将造成信号失真，因此在保证信号质量的前提下，双绞线的最大传输距离为100米。当两台电脑之间的距离超过100米时，为了实现双机互连，人们便在这两台电脑之间安装一个<中继器>，它的作用就是将已经衰减得不完整的信号经过整理，重新产生出完整的信号再继续传送。谈到了这里那就再提下放大器，<放大器>和中继器都是起放大信号的作用，只不过放大器放大的是模拟信号，中继器放大的是数字信号。

# 集线器(HUB)
　　集线器就是将网线集中到一起的机器，也就是多台主机和设备的连接器。集线器的主要功能以扩大网络的传输距离，是<中继器>的一种形式，区别在于集线器能够提供多端口服务，也称为多口中继器。集线器在OSI/RM中的物理层。
集线器的基本功能是信息分发，它把一个端口接收的所有信号向所有端口分发出去。一些集线器在分发之前将弱信号重新生成，一些集线器整理信号的时序以提供所有端口间的同步数据通信。
　　集线器实际就是一种多端口的中继器。集线器一般有4、8、16、24、32等数量的RJ45接口，通过这些接口，集线器便能为相应数量的电脑完成“中继”功能（将已经衰减得不完整的信号经过整理，重新产生出完整的信号再继续传送）。由于它在网络中处于一种“中心”位置，因此集线器也叫做“HUB”。 
　　集线器的工作原理很简单，比如有一个具备8个端口的集线器，共连接了8台电脑。集线器处于网络的<中心>，通过集线器对信号进行转发，8台电脑之间可以互连互通。具体通信过程是这样的：假如计算机1要将一条信息发送给计算机8，当计算机1的网卡将信息通过双绞线送到集线器上时，集线器并不会直接将信息送给计算机8，它会将信息进行<广播>——将信息同时发送给8个端口，当8个端口上的计算机接收到这条广播信息时，会对信息进行检查，如果发现该信息是发给自己的，则接收，否则不予理睬。由于该信息是计算机1发给计算机8的，因此最终计算机8会接收该信息，而其它7台电脑看完信息后，会因为信息不是自己的而不接收该信息。

# 交换机(Switch)
　　交换机是集线器的升级换代产品，外形上和集线器没什么分别，是一种在通信系统中自动完成信息交换功能的设备，用途和HUB一样也是连接组网之用，但是它具有比集线器更强大的功能。
　　交换机也叫交换式集线器，它通过对信息进行重新生成，并经过内部处理后转发至指定端口，具备自动寻址能力和交换作用，由于交换机根据所传递信息包的目的地址，将每一信息包<独立地从源端口送至目的端口>，避免了和其他端口发生碰撞。广义的交换机就是一种在通信系统中完成信息交换功能的设备。 
　　在计算机网络系统中，交换机是针对共享工作模式的弱点而推出的。集线器是采用共享工作模式的代表，如果把集线器比作一个邮递员，那么这个邮递员是个不认识字的“傻瓜”——要他去送信，他不知道直接根据信件上的地址将信件送给收信人，只会拿着信分发给所有的人，然后让接收的人根据地址信息来判断是不是自己的!而交换机则是一个“聪明”的邮递员——交换机拥有一条高带宽的背部总线和内部交换矩阵。交换机的所有的端口都挂接在这条背部总线上，当控制电路收到数据包以后，处理端口会查找<内存中的地址对照表>以确定目的MAC（网卡的硬件地址）的NIC（网卡）挂接在哪个端口上，通过内部交换矩阵迅速将数据包传送到目的端口。目的MAC若不存在，交换机才广播到所有的端口，接收端口回应后交换机会“学习”新的地址，并把它添加入内部地址表中。
　　可见，交换机在收到某个网卡发过来的“信件”时，会根据上面的地址信息，以及自己掌握的“常住居民户口簿”快速将信件送到收信人的手中。万一收信人的地址不在“户口簿”上，交换机才会像集线器一样将信分发给所有的人，然后从中找到收信人。而找到收信人之后，交换机会立刻将这个人的信息登记到“户口簿”上，这样以后再为该客户服务时，就可以迅速将信件送达了。

三层交换机：<一次路由，多次转发>
[](http://blog.csdn.net/shmily_cml0603/article/details/24363913)

# 路由器(Router)
　　路由器是网络中进行网间连接的关键设备。作为不同网络之间互相连接的枢纽，路由器系统构成了基于 TCP/IP 的国际互连网络 Internet 的主体脉络。 
　　路由器之所以在互连网络中处于关键地位，是因为它处于<网络层>，一方面能够跨越不同的物理网络类型（DDN、FDDI、以太网等等），另一方面在逻辑上将整个<互联网络分割>成逻辑上独立的网络单位，使网络具有一定的逻辑结构。路由器的主要工作就是为经过路由器的每个数据帧寻找一条最佳传输路径，并将该数据有效地传送到目的站点。 路由器的基本功能是，把数据（IP 报文）传送到正确的网络，细分则包括：
1、IP 数据报的转发，包括数据报的寻径和传送；
2、子网隔离，抑制广播风暴；
3、维护<路由表>，并与其它路由器交换路由信息，这是 IP 报文转发的基础；
4、IP 数据报的差错处理及简单的拥塞控制；
5、实现对 IP 数据报的过滤和记帐。 
　　路由器构成了 Internet 的骨架。它的处理速度是网络通信的主要瓶颈之一，它的可靠性则直接影响着网络互连的质量。因此Internet 研究领域中，路由器技术始终处于核心地位。

# 网桥(Bridge)

网桥的每个物理网卡作为一个端口，运行于<混杂模式>，而且是在链路层工作。

简单来说，桥接就是把一台机器上的若干个网络接口“连接”起来。其结果是，其中一个网口收到的报文会被<复制>给其他网口并发送出去。以使得网口之间的报文能够互相转发。<交换机=多接口网桥>就是这样一个设备，它有若干个网口，并且这些网口是桥接起来的。于是，与交换机相连的若干主机就能够通过交换机的报文转发而互相通信。

概括来说，网桥实现最重要的两点功能：
1 MAC学习：学习MAC地址，起初，网桥是没有任何地址与端口的对应关系的，它发送数据，还是得想HUB一样，但是每发送一个数据，它都会关心数据包的来源MAC是从自己的哪个端口来的，由于学习，建立地址-端口的对照表（CAM表）。
2 报文转发：每发送一个数据包，网桥都会提取其目的MAC地址，从自己的地址-端口对照表(CAM表)中查找由哪个端口把数据包发送出去。

[brctl操作bridge](http://www.360doc.com/content/12/0410/17/8744436_202532415.shtml)

# 网关(Gateway)
　　网关（协议转换器）是互连网络中操作在OSI网络层之上的具有协议转换功能设施，之所以称为设施，
    是因为<网关不一定是一台设备>，有可能在一台主机中实现网关功能。 
　　网关用于以下几种场合的异构网络互连： 
　　1).异构型局域网，如互联专用交换网PBX与遵循IEEE802标准的局域网。 
　　2).局域网与广域网的互联。 
　　3).广域网与广域网的互联。 
　　4).局域网与主机的互联（当主机的操作系统与网络操作系统不兼容时，可以通过网关连接）。
　　网关的分类
　　1)协议网关：协议网关通常在使用不同协议的网络区域间做协议转换。 
　　2)应用网关：应用网关是在使用不同数据格式间翻译数据的系统。 
　　3)安全网关：安全网关是各种技术的融合，具有重要且独特的保护作用，其范围从协议级过滤到十分复杂的应用级过滤。

# [网关和路由器的区别？](https://www.zhihu.com/question/21787311)

<网关>，是一个相对抽象的概念，不具体特指一类产品，只要连接两个不同的网络的设备都可以叫网关；
<路由器>，一般特指能够实现路由寻找和转发的特定类产品，路由器很显然能够实现网关的功能。
`route -n`中的<默认网关>，事实上不是一个产品而是一个网络层的概念，PC本身不具备路由寻址能力，
所以PC要把所有的IP包发送到一个默认的中转地址上面进行转发，也就是默认网关。

这个网关可以在路由器上，可以在三层交换机上，可以在防火墙上，可以在服务器上，所以和物理的设备无关。

